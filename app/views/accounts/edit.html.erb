<div class="container-fluid py-4" style="max-width: 900px;">
  <div class="mb-4">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-2">
        <li class="breadcrumb-item"><%= link_to "Account Settings", account_path %></li>
        <li class="breadcrumb-item active" aria-current="page">Edit</li>
      </ol>
    </nav>
    <h1 class="fs-2 mb-0">Edit Account Settings</h1>
  </div>

  <div class="card border">
    <div class="card-body">
      <%= form_with(model: @account, url: account_path, local: true) do |f| %>
        <% if @account.errors.any? %>
          <div class="alert alert-danger small mb-4" role="alert">
            <strong><%= pluralize(@account.errors.count, "error") %> prohibited this account from being saved:</strong>
            <ul class="mb-0 mt-2">
              <% @account.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <h5 class="mb-3">Account Information</h5>

        <div class="mb-3">
          <%= f.label :name, "Account Name", class: "form-label" %>
          <%= f.text_field :name, class: "form-control", required: true %>
        </div>

        <div class="mb-3">
          <%= f.label :subdomain, "Subdomain", class: "form-label" %>
          <div class="input-group">
            <%= f.text_field :subdomain, class: "form-control", required: true %>
            <span class="input-group-text">.fuegomail.com</span>
          </div>
          <small class="text-muted">Used for email tracking and subscription forms</small>
        </div>

        <div class="mb-4">
          <%= f.label :logo, "Brand Logo", class: "form-label" %>
          <%= f.file_field :logo, accept: "image/*", class: "form-control" %>
          <small class="text-muted">Upload your company logo (PNG, JPG, or GIF. Recommended size: 200x80px)</small>
          <% if @account.logo.attached? %>
            <div class="mt-2">
              <label class="form-label small">Current Logo</label>
              <div class="border p-2 bg-light d-inline-block">
                <img src="<%= @account.logo_url %>" alt="Brand Logo" style="max-width: 200px; max-height: 80px;">
              </div>
            </div>
          <% elsif @account.brand_logo.present? %>
            <div class="mt-2">
              <label class="form-label small">Current Logo (URL)</label>
              <div class="border p-2 bg-light d-inline-block">
                <img src="<%= @account.brand_logo %>" alt="Brand Logo" style="max-width: 200px; max-height: 80px;">
              </div>
            </div>
          <% end %>
        </div>

        <hr class="my-4">

        <h5 class="mb-3">AWS SES Configuration</h5>

        <div class="mb-3">
          <%= f.label :aws_region, "AWS Region", class: "form-label" %>
          <%= f.select :aws_region,
              [
                ['US East (N. Virginia)', 'us-east-1'],
                ['US East (Ohio)', 'us-east-2'],
                ['US West (Oregon)', 'us-west-2'],
                ['EU (Ireland)', 'eu-west-1'],
                ['EU (Frankfurt)', 'eu-central-1'],
                ['Asia Pacific (Mumbai)', 'ap-south-1'],
                ['Asia Pacific (Sydney)', 'ap-southeast-2']
              ],
              {},
              class: "form-select"
          %>
        </div>

        <div class="mb-3">
          <%= f.label :aws_access_key_id, "AWS Access Key ID", class: "form-label" %>
          <%= f.text_field :aws_access_key_id, class: "form-control", placeholder: "Leave blank to keep current" %>
          <small class="text-muted">Your AWS IAM user access key</small>
        </div>

        <div class="mb-4">
          <%= f.label :aws_secret_access_key, "AWS Secret Access Key", class: "form-label" %>
          <%= f.password_field :aws_secret_access_key, class: "form-control", placeholder: "Leave blank to keep current" %>
          <small class="text-muted">Your AWS IAM user secret key (encrypted at rest)</small>
        </div>

        <div class="d-flex gap-2">
          <%= link_to "Cancel", account_path, class: "btn btn-outline-secondary" %>
          <%= f.submit "Save Changes", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
